<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InspIRCd: ClientProtocol::MessageTagProvider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ClientProtocol</b></li><li class="navelem"><a class="el" href="class_client_protocol_1_1_message_tag_provider.html">MessageTagProvider</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_client_protocol_1_1_message_tag_provider-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ClientProtocol::MessageTagProvider Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="clientprotocol_8h_source.html">clientprotocol.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ClientProtocol::MessageTagProvider:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_client_protocol_1_1_message_tag_provider.png" usemap="#ClientProtocol::MessageTagProvider_map" alt=""/>
  <map id="ClientProtocol::MessageTagProvider_map" name="ClientProtocol::MessageTagProvider_map">
<area href="class_events_1_1_module_event_listener.html" alt="Events::ModuleEventListener" shape="rect" coords="0,56,236,80"/>
<area href="classdynamic__reference__base_1_1_capture_hook.html" alt="dynamic_reference_base::CaptureHook" shape="rect" coords="0,0,236,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac1a5b7ade49c70ad29d6446cc60a01f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_message_tag_provider.html#ac1a5b7ade49c70ad29d6446cc60a01f1">MessageTagProvider</a> (<a class="el" href="class_module.html">Module</a> *mod)</td></tr>
<tr class="separator:ac1a5b7ade49c70ad29d6446cc60a01f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0336fe397875470caf699c3e92019218"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_message_tag_provider.html#a0336fe397875470caf699c3e92019218">OnPopulateTags</a> (<a class="el" href="class_client_protocol_1_1_message.html">ClientProtocol::Message</a> &amp;msg)</td></tr>
<tr class="separator:a0336fe397875470caf699c3e92019218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a370c975e617460e174dd2429f311e557"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mod_result.html">ModResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_message_tag_provider.html#a370c975e617460e174dd2429f311e557">OnProcessTag</a> (<a class="el" href="class_user.html">User</a> *user, const std::string &amp;tagname, std::string &amp;tagvalue)</td></tr>
<tr class="separator:a370c975e617460e174dd2429f311e557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeda4a7c29718347b3424fc48665c938a"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_message_tag_provider.html#aeda4a7c29718347b3424fc48665c938a">ShouldSendTag</a> (<a class="el" href="class_local_user.html">LocalUser</a> *user, const <a class="el" href="struct_client_protocol_1_1_message_tag_data.html">MessageTagData</a> &amp;tagdata)=0</td></tr>
<tr class="separator:aeda4a7c29718347b3424fc48665c938a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_events_1_1_module_event_listener"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_events_1_1_module_event_listener')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_events_1_1_module_event_listener.html">Events::ModuleEventListener</a></td></tr>
<tr class="memitem:a3c58708bb631c32457874b09139159c8 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_events_1_1_module_event_listener.html#a3c58708bb631c32457874b09139159c8">ModuleEventListener</a> (<a class="el" href="class_module.html">Module</a> *mod, const std::string &amp;eventid, unsigned int eventprio=DefaultPriority)</td></tr>
<tr class="separator:a3c58708bb631c32457874b09139159c8 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9929493211400f2ea306feab406ec9cf inherit pub_methods_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_module.html">Module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_events_1_1_module_event_listener.html#a9929493211400f2ea306feab406ec9cf">GetModule</a> () const</td></tr>
<tr class="separator:a9929493211400f2ea306feab406ec9cf inherit pub_methods_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf13224c9dc157e849f2c2f13ceaff97 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_events_1_1_module_event_listener.html#abf13224c9dc157e849f2c2f13ceaff97">GetPriority</a> () const</td></tr>
<tr class="separator:abf13224c9dc157e849f2c2f13ceaff97 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_class_events_1_1_module_event_listener"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_class_events_1_1_module_event_listener')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="class_events_1_1_module_event_listener.html">Events::ModuleEventListener</a></td></tr>
<tr class="memitem:a42c27710119fc7d9b11b9bddb7b17888 inherit pub_static_attribs_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top"><a id="a42c27710119fc7d9b11b9bddb7b17888"></a>
static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>DefaultPriority</b> = 100</td></tr>
<tr class="separator:a42c27710119fc7d9b11b9bddb7b17888 inherit pub_static_attribs_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for message tag providers. All message tags belong to a message tag provider. <a class="el" href="class_client_protocol_1_1_message.html">Message</a> tag providers can populate messages with tags before the message is sent and they have the job of determining whether a user should get a message tag or be allowed to send one. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac1a5b7ade49c70ad29d6446cc60a01f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a5b7ade49c70ad29d6446cc60a01f1">&#9670;&nbsp;</a></span>MessageTagProvider()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ClientProtocol::MessageTagProvider::MessageTagProvider </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_module.html">Module</a> *&#160;</td>
          <td class="paramname"><em>mod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mod</td><td><a class="el" href="class_module.html">Module</a> owning the provider. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0336fe397875470caf699c3e92019218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0336fe397875470caf699c3e92019218">&#9670;&nbsp;</a></span>OnPopulateTags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ClientProtocol::MessageTagProvider::OnPopulateTags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_client_protocol_1_1_message.html">ClientProtocol::Message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a message is ready to be sent to give the tag provider a chance to add tags to the message. To add tags call <a class="el" href="class_client_protocol_1_1_message.html#a8f1ae68e14c51e4eabd84229b7d01f8a">Message::AddTag()</a>. If the provided tag or tags have been added already elsewhere or if the provider doesn't want its tag(s) to be on the message, the implementation doesn't have to do anything special. The default implementation does nothing. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td><a class="el" href="class_client_protocol_1_1_message.html">Message</a> to be populated with tags. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a370c975e617460e174dd2429f311e557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a370c975e617460e174dd2429f311e557">&#9670;&nbsp;</a></span>OnProcessTag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_mod_result.html">ModResult</a> ClientProtocol::MessageTagProvider::OnProcessTag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_user.html">User</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tagname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>tagvalue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called for each tag that the server receives from a client in a message. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td><a class="el" href="class_user.html">User</a> that sent the tag. </td></tr>
    <tr><td class="paramname">tagname</td><td>Name of the tag. </td></tr>
    <tr><td class="paramname">tagvalue</td><td>Value of the tag, empty string if the tag has no value. May be modified. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MOD_RES_ALLOW to accept the tag with the value in 'value', MOD_RES_DENY to reject the tag and act as if it wasn't sent, MOD_RES_PASSTHRU to make no decision. If no hooks accept a tag, the tag is rejected. The default implementation returns MOD_RES_PASSTHRU. </dd></dl>

</div>
</div>
<a id="aeda4a7c29718347b3424fc48665c938a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeda4a7c29718347b3424fc48665c938a">&#9670;&nbsp;</a></span>ShouldSendTag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool ClientProtocol::MessageTagProvider::ShouldSendTag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_local_user.html">LocalUser</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_client_protocol_1_1_message_tag_data.html">MessageTagData</a> &amp;&#160;</td>
          <td class="paramname"><em>tagdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called whenever a user is about to receive a message that has a tag attached which is provided by this provider to determine whether or not the user should get the tag. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td><a class="el" href="class_user.html">User</a> in question. </td></tr>
    <tr><td class="paramname">tagdata</td><td>Tag in question. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the tag should be sent to the user, false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/<a class="el" href="clientprotocol_8h_source.html">clientprotocol.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
