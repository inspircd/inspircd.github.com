<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InspIRCd: ClientProtocol::EventHook Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ClientProtocol</b></li><li class="navelem"><a class="el" href="class_client_protocol_1_1_event_hook.html">EventHook</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_client_protocol_1_1_event_hook-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ClientProtocol::EventHook Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="clientprotocol_8h_source.html">clientprotocol.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ClientProtocol::EventHook:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_client_protocol_1_1_event_hook.png" usemap="#ClientProtocol::EventHook_map" alt=""/>
  <map id="ClientProtocol::EventHook_map" name="ClientProtocol::EventHook_map">
<area href="class_events_1_1_module_event_listener.html" alt="Events::ModuleEventListener" shape="rect" coords="0,56,236,80"/>
<area href="classdynamic__reference__base_1_1_capture_hook.html" alt="dynamic_reference_base::CaptureHook" shape="rect" coords="0,0,236,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc7c3598ba5364e3c4d5194b191d0193"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_event_hook.html#acc7c3598ba5364e3c4d5194b191d0193">EventHook</a> (<a class="el" href="class_module.html">Module</a> *mod, const std::string &amp;name, unsigned int priority=Events::ModuleEventListener::DefaultPriority)</td></tr>
<tr class="separator:acc7c3598ba5364e3c4d5194b191d0193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58b3dde6b3af7fe31748cd488085c9d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_event_hook.html#aa58b3dde6b3af7fe31748cd488085c9d">OnEventInit</a> (const <a class="el" href="class_client_protocol_1_1_event.html">ClientProtocol::Event</a> &amp;ev)</td></tr>
<tr class="separator:aa58b3dde6b3af7fe31748cd488085c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aec4e632953c56161d0bbdb99d34216"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mod_result.html">ModResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_event_hook.html#a3aec4e632953c56161d0bbdb99d34216">OnPreEventSend</a> (<a class="el" href="class_local_user.html">LocalUser</a> *user, const <a class="el" href="class_client_protocol_1_1_event.html">ClientProtocol::Event</a> &amp;ev, ClientProtocol::MessageList &amp;messagelist)=0</td></tr>
<tr class="separator:a3aec4e632953c56161d0bbdb99d34216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_events_1_1_module_event_listener"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_events_1_1_module_event_listener')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_events_1_1_module_event_listener.html">Events::ModuleEventListener</a></td></tr>
<tr class="memitem:a3c58708bb631c32457874b09139159c8 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_events_1_1_module_event_listener.html#a3c58708bb631c32457874b09139159c8">ModuleEventListener</a> (<a class="el" href="class_module.html">Module</a> *mod, const std::string &amp;eventid, unsigned int eventprio=DefaultPriority)</td></tr>
<tr class="separator:a3c58708bb631c32457874b09139159c8 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9929493211400f2ea306feab406ec9cf inherit pub_methods_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_module.html">Module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_events_1_1_module_event_listener.html#a9929493211400f2ea306feab406ec9cf">GetModule</a> () const</td></tr>
<tr class="separator:a9929493211400f2ea306feab406ec9cf inherit pub_methods_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf13224c9dc157e849f2c2f13ceaff97 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_events_1_1_module_event_listener.html#abf13224c9dc157e849f2c2f13ceaff97">GetPriority</a> () const</td></tr>
<tr class="separator:abf13224c9dc157e849f2c2f13ceaff97 inherit pub_methods_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:acdd392541a15b955aae7302e4923bc17"><td class="memItemLeft" align="right" valign="top"><a id="acdd392541a15b955aae7302e4923bc17"></a>
static std::string&#160;</td><td class="memItemRight" valign="bottom"><b>GetEventName</b> (const std::string &amp;name)</td></tr>
<tr class="separator:acdd392541a15b955aae7302e4923bc17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_class_events_1_1_module_event_listener"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_class_events_1_1_module_event_listener')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="class_events_1_1_module_event_listener.html">Events::ModuleEventListener</a></td></tr>
<tr class="memitem:a42c27710119fc7d9b11b9bddb7b17888 inherit pub_static_attribs_class_events_1_1_module_event_listener"><td class="memItemLeft" align="right" valign="top"><a id="a42c27710119fc7d9b11b9bddb7b17888"></a>
static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>DefaultPriority</b> = 100</td></tr>
<tr class="separator:a42c27710119fc7d9b11b9bddb7b17888 inherit pub_static_attribs_class_events_1_1_module_event_listener"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for client protocol event hooks. A protocol event hook is attached to a single event type. It has the ability to alter or block messages sent to users which belong to the event the hook is attached to. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acc7c3598ba5364e3c4d5194b191d0193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc7c3598ba5364e3c4d5194b191d0193">&#9670;&nbsp;</a></span>EventHook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ClientProtocol::EventHook::EventHook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_module.html">Module</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>priority</em> = <code>Events::ModuleEventListener::DefaultPriority</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mod</td><td>Owner of the hook. </td></tr>
    <tr><td class="paramname">name</td><td>Name of the event to hook. </td></tr>
    <tr><td class="paramname">priority</td><td>Priority of the hook. Determines the order in which hooks for the same event get called. Optional. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa58b3dde6b3af7fe31748cd488085c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa58b3dde6b3af7fe31748cd488085c9d">&#9670;&nbsp;</a></span>OnEventInit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ClientProtocol::EventHook::OnEventInit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_client_protocol_1_1_event.html">ClientProtocol::Event</a> &amp;&#160;</td>
          <td class="paramname"><em>ev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called exactly once before an event is sent to any user. The default implementation doesn't do anything. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td><a class="el" href="class_client_protocol_1_1_event.html">Event</a> being sent to one or more users. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3aec4e632953c56161d0bbdb99d34216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aec4e632953c56161d0bbdb99d34216">&#9670;&nbsp;</a></span>OnPreEventSend()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_mod_result.html">ModResult</a> ClientProtocol::EventHook::OnPreEventSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_local_user.html">LocalUser</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_client_protocol_1_1_event.html">ClientProtocol::Event</a> &amp;&#160;</td>
          <td class="paramname"><em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClientProtocol::MessageList &amp;&#160;</td>
          <td class="paramname"><em>messagelist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called for each user that may receive the event. The hook may alter the messages sent to the user and decide whether further hooks should be executed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td><a class="el" href="class_user.html">User</a> the message list is being prepared to be sent to. </td></tr>
    <tr><td class="paramname">ev</td><td><a class="el" href="class_client_protocol_1_1_event.html">Event</a> associated with the messages. </td></tr>
    <tr><td class="paramname">messagelist</td><td>List of messages to send to the user. The hook can alter this in any way it sees fit, for example it can replace messages, add new messages, etc. The list must not be empty when the method returns. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MOD_RES_PASSTHRU to run hooks after the called hook or if no hooks are after the called hook, send the messages in messagelist to the user. MOD_RES_DENY to not send any messages to the user and to not run other hooks, MOD_RES_ALLOW to send the messages in messagelist to the user and to not run other hooks. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/<a class="el" href="clientprotocol_8h_source.html">clientprotocol.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
